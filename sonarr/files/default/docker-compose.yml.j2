---
version: "2.1"
services:
  sonarr:
    image: {{ sonarr.lookup.containers.sonarr.image }}
    container_name: sonarr
    env_file:
      - {{ sonarr.lookup.paths.config_sonarr }}
    volumes:
      - {{ sonarr.lookup.paths.data }}:/config
{%- for path in sonarr.mount_paths %}
{%-   if path is mapping %}
      - {{ path | first }}:{{ path.values() | first }}
{%-   else %}
      - {{ path }}:{{ path }}
{%-   endif %}
{%- endfor %}
{%- for path in sonarr.lookup.paths.misc %}
{%-   if path is mapping %}
      - {{ path | first }}:{{ path.values() | first }}
{%-   else %}
      - {{ path }}:{{ path }}
{%-   endif %}
{%- endfor %}
    ports:
      - {{ sonarr.container.host_port }}:8989
    restart: unless-stopped
